# Story 2.3: Foundational Badge System

## Status
Draft

## Story
**As an** authenticated user,
**I want** to earn and display badges based on task completion,
**so that** my efforts are recognized and I feel more motivated.

## Acceptance Criteria
1. A system exists to define and manage badges (e.g., "First Task Completed," "5 Tasks Completed").
2. When a user completes a task, the system checks if any badge criteria are met.
3. If criteria are met, the user is awarded the corresponding badge.
4. Earned badges are displayed on the user's profile page.
5. A notification (e.g., a subtle animation or message) informs the user when they earn a new badge.

## Tasks / Subtasks
- [ ] Task 1 (Backend - AC: 1): Implement a `Badge` entity and repository.
    - [ ] Subtask 1.1: Pre-populate the `badges` table with a few initial badges.
- [ ] Task 2 (Backend - AC: 2, 3): Create a `GamificationService` to handle the logic for awarding badges.
    - [ ] Subtask 2.1: The service should be triggered when a task is completed.
    - [ ] Subtask 2.2: Implement logic to check if a user has met the criteria for any badges.
- [ ] Task 3 (Backend - AC: 4): Implement the `GET /api/users/me/badges` endpoint to retrieve the authenticated user's earned badges.
- [ ] Task 4 (Frontend - AC: 4): Create a `ProfilePage` that displays the user's earned badges.
- [ ] Task 5 (Frontend - AC: 5): Implement a notification system to inform users when they've earned a new badge.

## Dev Notes

### Frontend
- **Component:** A `ProfilePage` will be needed to display user information and earned badges. A notification component (e.g., a "toast" or "snackbar") will be needed to inform users of new badges. [Source: `docs/architecture/components.md`]
- **Data Flow:** The `ProfilePage` will fetch the user's badges from the new backend endpoint. [Source: `docs/architecture/core-workflows.md`]

### Backend
- **Endpoint:** A new `GET /api/users/me/badges` endpoint is required. [Source: `docs/architecture/api-specification.md`]
- **Service Logic:** A `GamificationService` will contain the core logic for the badge system. This service will be called by the `TaskService` when a task's status is updated to "Completed". [Source: `docs/architecture/backend-architecture.md`]
- **Data Model:** The `Badge` entity will be used, with a many-to-many relationship with the `User` entity. [Source: `docs/architecture/data-models.md`]

### Testing
- **Backend:** Unit tests for the `GamificationService` are critical to ensure badges are awarded correctly. Integration tests for the new endpoint should also be created. [Source: `docs/architecture/testing-strategy.md`]
- **Frontend:** Component tests for the `ProfilePage` and the badge notification system should be written. [Source: `docs/architecture/testing-strategy.md`]

## Change Log
| Date | Version | Description | Author |
|---|---|---|---|
| 2025-11-06 | 1.0 | Initial draft | Bob (Scrum Master) |
