# Story 3.2: Linking Tasks to Projects

## Status
Draft

## Story
**As an** authenticated user,
**I want** to associate tasks with a specific project,
**so that** all relevant tasks are grouped under their respective workstreams.

## Acceptance Criteria
1. When creating a new task, the user can select an existing project to link it to.
2. When editing an existing task, the user can change its associated project.
3. The Kanban board view can be filtered to show tasks belonging to a specific project.
4. Tasks are displayed with an indicator of their associated project.

## Tasks / Subtasks
- [ ] Task 1 (Frontend - AC: 1): Add a "Project" dropdown to the `CreateTaskModal`.
- [ ] Task 2 (Frontend - AC: 2): Add a "Project" dropdown to the `TaskDetailsModal`.
- [ ] Task 3 (Frontend - AC: 3): Implement a project filter on the Kanban board page.
- [ ] Task 4 (Frontend - AC: 4): Display the project name on the `TaskCard` component.
- [ ] Task 5 (Backend - AC: 1, 2): Modify the `createTask` and `updateTask` methods in `TaskService` to handle project association.
    - [ ] Subtask 5.1: Update the corresponding DTOs to include `projectId`.

## Dev Notes

### Frontend
- **Component:** The `CreateTaskModal` and `TaskDetailsModal` will need to be modified to include a project selection dropdown. The main Kanban board page will need a new filter component. [Source: `docs/architecture/components.md`]
- **Data Flow:** The project filter will control which tasks are fetched from the backend and displayed on the board. [Source: `docs/architecture/core-workflows.md`]

### Backend
- **Endpoint:** The existing `POST /api/projects/{projectId}/tasks` and `PUT /api/tasks/{taskId}` endpoints will be used. The DTOs for these endpoints will need to be updated. [Source: `docs/architecture/api-specification.md`]
- **Service Logic:** The `TaskService` will be updated to handle the `projectId` when creating or updating tasks. [Source: `docs/architecture/backend-architecture.md`]
- **Data Model:** The `Task` entity already has a many-to-one relationship with the `Project` entity. [Source: `docs/architecture/data-models.md`]

### Testing
- **Backend:** Existing tests for `TaskService` and `TaskController` should be updated to cover project association. [Source: `docs/architecture/testing-strategy.md`]
- **Frontend:** Tests for the modified modals and the new project filter should be created. [Source: `docs/architecture/testing-strategy.md`]

## Change Log
| Date | Version | Description | Author |
|---|---|---|---|
| 2025-11-06 | 1.0 | Initial draft | Bob (Scrum Master) |
