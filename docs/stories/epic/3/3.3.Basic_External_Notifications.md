# Story 3.3: Basic External Notifications

## Status
Approved

## Story
**As a** project manager,
**I want** to configure basic notifications to be sent to a designated Slack or Microsoft Teams channel,
**so that** my team stays informed about key task updates.

## Acceptance Criteria
1. In project settings, a 'Notifications' section is available.
2. Managers can input a webhook URL for a Slack or Microsoft Teams channel.
3. Managers can select which events trigger a notification (e.g., "Task Created," "Task Completed," "Task Status Changed").
4. When a selected event occurs, a concise notification message is sent to the configured webhook URL.
5. The notification message includes relevant task details (e.g., task title, new status, assignee).

## Tasks / Subtasks
- [ ] Task 1 (Frontend - AC: 1, 2, 3): Implement a `NotificationsSettings` component within the `ProjectSettingsPage`.
    - [ ] Subtask 1.1: Include a field for the webhook URL and checkboxes for notification events.
- [ ] Task 2 (Backend - AC: 2, 3): Add fields to the `Project` entity to store the webhook URL and enabled notification events.
    - [ ] Subtask 2.1: Update the `ProjectService` and DTOs to manage these new settings.
- [ ] Task 3 (Backend - AC: 4, 5): Create a `NotificationService`.
    - [ ] Subtask 3.1: This service will be responsible for sending a formatted message to a given webhook URL.
    - [ ] Subtask 3.2: Integrate this service with the `TaskService`. When a relevant task event occurs, the `TaskService` will call the `NotificationService` if notifications are enabled for that project.

## Dev Notes

### Frontend
- **Component:** A new `NotificationsSettings` component will be created and added to the `ProjectSettingsPage`. [Source: `docs/architecture/components.md`]

### Backend
- **Service Logic:** A `NotificationService` will be created. It will use an HTTP client (like `RestTemplate` or `WebClient`) to send POST requests to the configured webhook URLs. [Source: `docs/architecture/backend-architecture.md`, `docs/architecture/external-apis.md`]
- **Data Model:** The `Project` entity will be extended to include notification settings. [Source: `docs/architecture/data-models.md`]
- **Integration:** The `TaskService` will be modified to trigger notifications. This should be done in an asynchronous, non-blocking way to avoid impacting the performance of task operations. [Source: `docs/architecture/backend-architecture.md`]

### Testing
- **Backend:** Unit tests for the `NotificationService` are important. Since this involves external communication, mocking the HTTP client is the best approach. [Source: `docs/architecture/testing-strategy.md`]
- **Frontend:** Component tests for the `NotificationsSettings` component should be written. [Source: `docs/architecture/testing-strategy.md`]

## Change Log
| Date | Version | Description | Author |
|---|---|---|---|
| 2025-11-06 | 1.0 | Initial draft | Bob (Scrum Master) |
